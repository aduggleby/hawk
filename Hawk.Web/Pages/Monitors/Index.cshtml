@page
@* <summary>Monitors list page.</summary> *@
@model Hawk.Web.Pages.Monitors.IndexModel
@{
    ViewData["Title"] = "Monitors";
}

<div class="flex items-start justify-between gap-4 mb-6">
    <div>
        <h1 class="text-2xl font-semibold tracking-tight">Monitors</h1>
        <p class="text-sm text-zinc-600">Uptime and content verification checks.</p>
    </div>
    <div>
        <a class="hawk-btn hawk-btn-primary" asp-page="/Monitors/Create">New monitor</a>
    </div>
</div>

@if (Model.Monitors.Count == 0)
{
    <div class="hawk-card">
        <div class="text-sm text-zinc-600">No monitors yet. Create your first one.</div>
    </div>
}
else
{
    <div class="hawk-card p-0 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm">
                <thead class="bg-zinc-50 text-zinc-600">
                <tr>
                    <th class="text-left font-semibold px-4 py-3">Name</th>
                    <th class="text-left font-semibold px-4 py-3">Method</th>
                    <th class="text-left font-semibold px-4 py-3">URL</th>
                    <th class="text-left font-semibold px-4 py-3">Enabled</th>
                    <th class="text-left font-semibold px-4 py-3">Last run</th>
                    <th class="text-left font-semibold px-4 py-3">Next run</th>
                    <th class="text-right font-semibold px-4 py-3"></th>
                </tr>
                </thead>
                <tbody class="divide-y divide-zinc-100">
                @foreach (var m in Model.Monitors)
                {
                    <tr class="hover:bg-zinc-50/70">
                        <td class="px-4 py-3 font-medium">@m.Name</td>
                        <td class="px-4 py-3 font-mono text-xs"><span class="rounded-lg border border-zinc-200 bg-white px-2 py-1">@m.Method</span></td>
                        <td class="px-4 py-3">
                            <div class="font-mono text-xs truncate max-w-[520px]">@m.Url</div>
                        </td>
                        <td class="px-4 py-3 text-zinc-700">@(m.Enabled ? "Yes" : "No")</td>
                        <td class="px-4 py-3 text-zinc-700">@(m.LastRunAt?.ToLocalTime().ToString("g") ?? "-")</td>
                        <td class="px-4 py-3 text-zinc-700">@(m.NextRunAt?.ToLocalTime().ToString("g") ?? "-")</td>
                        <td class="px-4 py-3 text-right">
                            <a class="hawk-btn hawk-btn-ghost" asp-page="/Monitors/Details" asp-route-id="@m.Id">View</a>
                            <a class="hawk-btn hawk-btn-ghost ml-2" asp-page="/Monitors/Edit" asp-route-id="@m.Id">Edit</a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    </div>
}
